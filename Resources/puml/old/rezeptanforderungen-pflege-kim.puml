@startuml

'top to bottom direction

'skinparam linetype ortho
hide circle
hide methods

class "Fachliche \nInformationseinheit" as Businessobject #BUSINESS

class "Rezeptanforderung" as Rezeptanforderung #BUSINESS
class "Rezeptanforderung_Storno" as Rezeptanforderung_Storno #BUSINESS
class "Rezeptanforderung_Rezeptuebermittlung" as Rezeptanforderung_Rezeptuebermittlung #BUSINESS
class "Rezeptanforderung_Ablehnung" as Rezeptanforderung_Ablehnung #BUSINESS
class "Verordnung_Dispensierung" as Verordnung_Dispensierung #BUSINESS

class "FHIR-Bundle" as Fhirbundle #APPLICATION
class "KIM-Nachricht" as KIMNachricht #TECHNOLOGY

class "Empfänger" as Empfaenger #TECHNOLOGY
class "Absender" as Absender #TECHNOLOGY
class "E-Rezept" as ERezept
class "E-Rezept-Token" as ERezepttoken
class "Verordnung" as Medication
class "Versicherter" as Versicherter
class "Dispensierung" as Dispensierung

Rezeptanforderung_Rezeptuebermittlung -left|> Businessobject: ist eine
Rezeptanforderung -down|> Businessobject: ist eine
Rezeptanforderung_Storno -left|> Businessobject: ist eine
Rezeptanforderung_Ablehnung -down|> Businessobject: ist eine
Verordnung_Dispensierung -|> Businessobject: ist eine

Rezeptanforderung -up- "1..1" Versicherter: bezieht sich auf >
Rezeptanforderung_Storno -- "1..1" Rezeptanforderung: revidiert >
Rezeptanforderung_Ablehnung -- "1..1" Rezeptanforderung: beantwortet >
Rezeptanforderung_Rezeptuebermittlung -- "1..1" Rezeptanforderung: beantwortet >
Rezeptanforderung_Rezeptuebermittlung -- "1..1" ERezepttoken: enthält >
Verordnung_Dispensierung -- "1..1" Dispensierung: enthält >
Verordnung_Dispensierung -- "1..1" Rezeptanforderung_Rezeptuebermittlung: aggregiert >
ERezepttoken -right- "1..1" ERezept: referenziert auf >
ERezept -right- "1..1" Medication: enthält >

KIMNachricht -- "1..1" Empfaenger: hat >
KIMNachricht -- "1..1" Absender: hat >

Businessobject -right- "1..1" Fhirbundle: wird repräsentiert als >

Fhirbundle "1..1" -- "0..1" KIMNachricht: ist enthalten in >
Rezeptanforderung -- "1..1" ERezept: bezieht sich auf >

@enduml